const fs = require('fs');
const path = require('path');

// 食べ物辞書データベース
const foodWords = [
  // インスタントラーメン・麺類
  'さんらーたんめん', 'サンライズタンメン', 'さんらーたんめん',
  'ちゅうかそば', '中華そば', 'ちゅうかそば',
  'しおらーめん', '塩ラーメン', 'しおらーめん',
  'みそらーめん', '味噌ラーメン', 'みそらーめん',
  'しょうゆらーめん', '醤油ラーメン', 'しょうゆらーめん',
  'とんこつらーめん', '豚骨ラーメン', 'とんこつらーめん',
  'うどん', 'うどん', 'うどん',
  'そば', 'そば', 'そば',
  'そうめん', 'そうめん', 'そうめん',
  'ひやむぎ', '冷や麦', 'ひやむぎ',
  'きしめん', 'きしめん', 'きしめん',
  'うどん', 'うどん', 'うどん',
  
  // 米・ご飯類
  'ごはん', 'ごはん', 'ごはん',
  'おにぎり', 'おにぎり', 'おにぎり',
  'ちゅうかどん', '中華丼', 'ちゅうかどん',
  'かつどん', 'カツ丼', 'かつどん',
  'てんどん', '天丼', 'てんどん',
  'うなぎどん', 'うなぎ丼', 'うなぎどん',
  'おやこどん', '親子丼', 'おやこどん',
  'ぎゅうどん', '牛丼', 'ぎゅうどん',
  'すし', '寿司', 'すし',
  'ちらしずし', 'ちらし寿司', 'ちらしずし',
  'まきずし', '巻き寿司', 'まきずし',
  'にぎりずし', '握り寿司', 'にぎりずし',
  
  // 肉類
  'ぎゅうにく', '牛肉', 'ぎゅうにく',
  'ぶたにく', '豚肉', 'ぶたにく',
  'とりにく', '鶏肉', 'とりにく',
  'さかな', '魚', 'さかな',
  'えび', 'えび', 'えび',
  'かに', 'かに', 'かに',
  'たこ', 'たこ', 'たこ',
  'いか', 'いか', 'いか',
  'あわび', 'あわび', 'あわび',
  'ほたて', 'ほたて', 'ほたて',
  'あさり', 'あさり', 'あさり',
  'しじみ', 'しじみ', 'しじみ',
  
  // 野菜・果物
  'やさい', '野菜', 'やさい',
  'にんじん', 'にんじん', 'にんじん',
  'たまねぎ', 'たまねぎ', 'たまねぎ',
  'じゃがいも', 'じゃがいも', 'じゃがいも',
  'さつまいも', 'さつまいも', 'さつまいも',
  'だいこん', '大根', 'だいこん',
  'きゅうり', 'きゅうり', 'きゅうり',
  'なす', 'なす', 'なす',
  'とまと', 'トマト', 'とまと',
  'きゃべつ', 'キャベツ', 'きゃべつ',
  'はくさい', '白菜', 'はくさい',
  'ほうれんそう', 'ほうれん草', 'ほうれんそう',
  'もやし', 'もやし', 'もやし',
  'きのこ', 'きのこ', 'きのこ',
  'しいたけ', 'しいたけ', 'しいたけ',
  'えのき', 'えのき', 'えのき',
  'まいたけ', 'まいたけ', 'まいたけ',
  'りんご', 'りんご', 'りんご',
  'みかん', 'みかん', 'みかん',
  'ぶどう', 'ぶどう', 'ぶどう',
  'いちご', 'いちご', 'いちご',
  'もも', 'もも', 'もも',
  'なし', 'なし', 'なし',
  'すいか', 'すいか', 'すいか',
  'かき', 'かき', 'かき',
  'うめ', 'うめ', 'うめ',
  
  // 調味料・調理法
  'しお', '塩', 'しお',
  'こしょう', 'こしょう', 'こしょう',
  'さとう', '砂糖', 'さとう',
  'みそ', '味噌', 'みそ',
  'しょうゆ', '醤油', 'しょうゆ',
  'みりん', 'みりん', 'みりん',
  'さけ', '酒', 'さけ',
  'みず', '水', 'みず',
  'おちゃ', 'お茶', 'おちゃ',
  'こうちゃ', '紅茶', 'こうちゃ',
  'コーヒー', 'コーヒー', 'こーひー',
  'ジュース', 'ジュース', 'じゅーす',
  'みるく', 'ミルク', 'みるく',
  'たまご', 'たまご', 'たまご',
  'ちーず', 'チーズ', 'ちーず',
  'ばたー', 'バター', 'ばたー',
  'まーがりん', 'マーガリン', 'まーがりん',
  'あぶら', '油', 'あぶら',
  'ごまあぶら', 'ごま油', 'ごまあぶら',
  'オリーブオイル', 'オリーブオイル', 'おりーぶおいる',
  
  // デザート・お菓子
  'あめ', 'あめ', 'あめ',
  'チョコレート', 'チョコレート', 'ちょこれーと',
  'ケーキ', 'ケーキ', 'けーき',
  'プリン', 'プリン', 'ぷりん',
  'アイスクリーム', 'アイスクリーム', 'あいすくりーむ',
  'ようかん', 'ようかん', 'ようかん',
  'まんじゅう', 'まんじゅう', 'まんじゅう',
  'だいふく', '大福', 'だいふく',
  'もち', 'もち', 'もち',
  'せんべい', 'せんべい', 'せんべい',
  'おかし', 'おかし', 'おかし',
  'クッキー', 'クッキー', 'くっきー',
  'ビスケット', 'ビスケット', 'びすけっと',
  'ポテトチップス', 'ポテトチップス', 'ぽてとちっぷす',
  
  // 飲み物
  'みず', '水', 'みず',
  'おちゃ', 'お茶', 'おちゃ',
  'こうちゃ', '紅茶', 'こうちゃ',
  'コーヒー', 'コーヒー', 'こーひー',
  'ジュース', 'ジュース', 'じゅーす',
  'みるく', 'ミルク', 'みるく',
  'さけ', '酒', 'さけ',
  'びーる', 'ビール', 'びーる',
  'ワイン', 'ワイン', 'わいん',
  'ウイスキー', 'ウイスキー', 'ういすきー',
  'すし', '寿司', 'すし',
  'てんぷら', '天ぷら', 'てんぷら',
  'すきやき', 'すき焼き', 'すきやき',
  'しゃぶしゃぶ', 'しゃぶしゃぶ', 'しゃぶしゃぶ',
  'やきにく', '焼肉', 'やきにく',
  'すし', '寿司', 'すし',
  'てんぷら', '天ぷら', 'てんぷら',
  'すきやき', 'すき焼き', 'すきやき',
  'しゃぶしゃぶ', 'しゃぶしゃぶ', 'しゃぶしゃぶ',
  'やきにく', '焼肉', 'やきにく',
  
  // その他の食べ物
  'パン', 'パン', 'ぱん',
  'サンドイッチ', 'サンドイッチ', 'さんどいっち',
  'ハンバーガー', 'ハンバーガー', 'はんばーがー',
  'ピザ', 'ピザ', 'ぴざ',
  'スパゲッティ', 'スパゲッティ', 'すぱげってぃ',
  'パスタ', 'パスタ', 'ぱすた',
  'カレー', 'カレー', 'かれー',
  'シチュー', 'シチュー', 'しちゅー',
  'スープ', 'スープ', 'すーぷ',
  'サラダ', 'サラダ', 'さらだ',
  'オムライス', 'オムライス', 'おむらいす',
  'チャーハン', 'チャーハン', 'ちゃーはん',
  'やきそば', '焼きそば', 'やきそば',
  'たこやき', 'たこ焼き', 'たこやき',
  'おこのみやき', 'お好み焼き', 'おこのみやき',
  'もんじゃやき', 'もんじゃ焼き', 'もんじゃやき',
  'おでん', 'おでん', 'おでん',
  'なべ', '鍋', 'なべ',
  'しゃぶしゃぶ', 'しゃぶしゃぶ', 'しゃぶしゃぶ',
  'すきやき', 'すき焼き', 'すきやき',
  'やきにく', '焼肉', 'やきにく',
  'すし', '寿司', 'すし',
  'てんぷら', '天ぷら', 'てんぷら',
  'すきやき', 'すき焼き', 'すきやき',
  'しゃぶしゃぶ', 'しゃぶしゃぶ', 'しゃぶしゃぶ',
  'やきにく', '焼肉', 'やきにく'
];

// カタカナをひらがなに変換する関数
function katakanaToHiragana(str) {
  return str.replace(/[\u30A1-\u30F6]/g, function(match) {
    const chr = match.charCodeAt(0) - 0x60;
    return String.fromCharCode(chr);
  });
}

// 漢字をひらがなに変換する関数（簡易版）
function kanjiToHiragana(str) {
  const kanjiHiraganaMap = {
    '中華': 'ちゅうか', '塩': 'しお', '味噌': 'みそ', '醤油': 'しょうゆ',
    '豚骨': 'とんこつ', '冷や': 'ひや', '大根': 'だいこん', '白菜': 'はくさい',
    'ほうれん草': 'ほうれんそう', 'しいたけ': 'しいたけ', 'えのき': 'えのき',
    'まいたけ': 'まいたけ', '砂糖': 'さとう', '酒': 'さけ', '茶': 'ちゃ',
    '紅茶': 'こうちゃ', 'ミルク': 'みるく', 'チーズ': 'ちーず',
    'バター': 'ばたー', 'マーガリン': 'まーがりん', '油': 'あぶら',
    'ごま油': 'ごまあぶら', 'あめ': 'あめ', 'チョコレート': 'ちょこれーと',
    'ケーキ': 'けーき', 'プリン': 'ぷりん', 'アイスクリーム': 'あいすくりーむ',
    'ようかん': 'ようかん', 'まんじゅう': 'まんじゅう', '大福': 'だいふく',
    'もち': 'もち', 'せんべい': 'せんべい', 'おかし': 'おかし',
    'クッキー': 'くっきー', 'ビスケット': 'びすけっと', 'ポテトチップス': 'ぽてとちっぷす',
    '水': 'みず', 'お茶': 'おちゃ', '紅茶': 'こうちゃ', 'コーヒー': 'こーひー',
    'ジュース': 'じゅーす', 'ミルク': 'みるく', '酒': 'さけ', 'ビール': 'びーる',
    'ワイン': 'わいん', 'ウイスキー': 'ういすきー', '寿司': 'すし',
    '天ぷら': 'てんぷら', 'すき焼き': 'すきやき', 'しゃぶしゃぶ': 'しゃぶしゃぶ',
    '焼肉': 'やきにく', 'パン': 'ぱん', 'サンドイッチ': 'さんどいっち',
    'ハンバーガー': 'はんばーがー', 'ピザ': 'ぴざ', 'スパゲッティ': 'すぱげってぃ',
    'パスタ': 'ぱすた', 'カレー': 'かれー', 'シチュー': 'しちゅー',
    'スープ': 'すーぷ', 'サラダ': 'さらだ', 'オムライス': 'おむらいす',
    'チャーハン': 'ちゃーはん', '焼きそば': 'やきそば', 'たこ焼き': 'たこやき',
    'お好み焼き': 'おこのみやき', 'もんじゃ焼き': 'もんじゃやき',
    'おでん': 'おでん', '鍋': 'なべ', 'しゃぶしゃぶ': 'しゃぶしゃぶ',
    'すき焼き': 'すきやき', '焼肉': 'やきにく', '寿司': 'すし',
    '天ぷら': 'てんぷら', 'すき焼き': 'すきやき', 'しゃぶしゃぶ': 'しゃぶしゃぶ',
    '焼肉': 'やきにく'
  };
  
  let result = str;
  Object.keys(kanjiHiraganaMap).forEach(kanji => {
    result = result.replace(new RegExp(kanji, 'g'), kanjiHiraganaMap[kanji]);
  });
  return result;
}

// 単語をひらがなに変換する関数
function convertToHiragana(word) {
  let hiragana = katakanaToHiragana(word);
  hiragana = kanjiToHiragana(hiragana);
  return hiragana;
}

// 既存の辞書ファイルを読み込む関数
function loadExistingDictionary(char) {
  const filePath = path.join(__dirname, `../assets/dictionary_new/char_${char}.json`);
  try {
    if (fs.existsSync(filePath)) {
      const content = fs.readFileSync(filePath, 'utf8');
      return JSON.parse(content);
    }
  } catch (error) {
    console.log(`Error reading char_${char}.json:`, error.message);
  }
  return [];
}

// メイン処理
function main() {
  console.log('食べ物辞書を追加中...');
  
  // 食べ物単語をひらがなに変換
  const hiraganaFoodWords = foodWords.map(word => convertToHiragana(word));
  
  // 重複を除去
  const uniqueFoodWords = [...new Set(hiraganaFoodWords)];
  console.log(`食べ物単語数: ${uniqueFoodWords.length}個`);
  
  // 3文字以上の単語のみをフィルタリング
  const filteredFoodWords = uniqueFoodWords.filter(word => word && word.length >= 3);
  console.log(`3文字以上の食べ物単語数: ${filteredFoodWords.length}個`);
  
  // 単語を分類
  const categories = {};
  filteredFoodWords.forEach(word => {
    const firstChar = word[0];
    if (!categories[firstChar]) {
      categories[firstChar] = [];
    }
    categories[firstChar].push(word);
  });
  
  // 各文字の辞書ファイルを更新
  Object.keys(categories).forEach(category => {
    const newWords = categories[category];
    const existingWords = loadExistingDictionary(category);
    
    // 既存の単語と新しい単語を結合
    const allWords = [...existingWords, ...newWords];
    const uniqueWords = [...new Set(allWords)];
    
    const outputPath = path.join(__dirname, `../assets/dictionary_new/char_${category}.json`);
    fs.writeFileSync(outputPath, JSON.stringify(uniqueWords, null, 2), 'utf8');
    console.log(`「${category}」の辞書: ${uniqueWords.length}個の単語を保存しました。`);
  });
  
  console.log('\n=== 食べ物辞書追加完了 ===');
  console.log(`追加された食べ物単語数: ${filteredFoodWords.length}個`);
  console.log('食べ物辞書の追加が完了しました！');
}

main();
