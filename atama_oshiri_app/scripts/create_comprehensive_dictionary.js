const fs = require('fs');
const path = require('path');

// 包括的な基本単語辞書を作成する関数
function createComprehensiveDictionary() {
  console.log('包括的な基本単語辞書を作成中...');
  
  // 基本単語データベース（日常生活でよく使われる単語）
  const basicWords = [
    // あ行
    'あい', 'あお', 'あか', 'あつ', 'あま', 'あさ', 'あら', 'あじさい', 'あいさつ',
    'あおもり', 'あきた', 'あいち', 'あかし', 'あさひ', 'あまがさ', 'あんこ', 'あんず', 'あんみつ',
    'あいかわゆう', 'あいだみき', 'あいだみきこ', 'あおいゆう', 'あさいけんいち',
    'あべしんぞう', 'あべしんたろう', 'あけちこごろう', 'あさだじろう',
    'あいおいにっせいどうわそんぽ', 'あおもりぎんこう', 'あきたぎんこう',
    'あいちぎんこう', 'あいちせいけん', 'あいちちゅうおうぎんこう',
    'あいでんていてい', 'あいでんていてぃー', 'あうでい', 'あおたがい',
    'あおにさい', 'あおばせいめい', 'あかがい', 'あかだい', 'あくい',
    'あるふぃー', 'あくしゅかい', 'あくていびてい', 'あくまばらい', 'あくめい',
    'あくりよくけい', 'あげまきがい', 'あさいー', 'あおざい', 'あさひせいめい',
    'あしあい', 'あしでまとい', 'あしながいくえいかい', 'あしはらい', 'あじふらい',
    'あすかじだい', 'あすかぶんめい', 'あつかい', 'あつかましい', 'あつりょくけい',
    'あづちももやまじだ', 'あみだにょらい', 'あめりかへい', 'あるかりせい',
    'あるこーるせい', 'あるときばらい', 'あんこくじだい', 'あんせい',
    'あんぜんちたい', 'あんぜんほしょうりじかい', 'あんどろいどけいたい',
    'あんにゆい', 'あんばい', 'あんぱい', 'あんもにあすい', 'あーるぶい',
    'あーるしてい', 'あかしんごう', 'あいぴーえすさいぼう', 'あいみょん',
    'あくただわりゅうのすけ', 'あしたのじょー', 'あいうえお', 'あかしあ',
    'あじあ', 'あいでぃあ', 'あかしや', 'あうたーうぇあ', 'あいきょう',
    'あおしんごう', 'あずちじょう', 'あれるぎーしょう', 'あかちゃんぷれい',
    
    // か行
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    'かわいい', 'きれい', 'くろい', 'けっこう', 'こんにちは', 'かわ', 'き', 'く', 'け', 'こ',
    
    // さ行
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ', 'さくら', 'しろい', 'すごい', 'せっかく', 'そうだ',
    
    // た行
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい', 'たのしい', 'ちいさい', 'つよい', 'てがみ', 'とおい',
    
    // な行
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり', 'なつかしい', 'にほん', 'ぬるい', 'ねこ', 'のり',
    
    // は行
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    'はな', 'ひま', 'ふるい', 'へた', 'ほしい', 'はな', 'ひま', 'ふるい', 'へた', 'ほしい',
    
    // ま行
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    'まち', 'みどり', 'むずかしい', 'めがね', 'もも', 'まち', 'みどり', 'むずかしい', 'めがね', 'もも',
    
    // や行
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる', 'やさい', 'ゆき', 'よる',
    
    // ら行
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか', 'らく', 'りんご', 'るす', 'れいぞうこ', 'ろうか',
    
    // わ行
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん', 'わかい', 'を', 'ん',
    
    // 追加の基本単語
    'にほんこくけんぽう', '日本国憲法', 'にほんこくけんぽう',
    'みじんこ', 'みんかんきぎょう', 'みこ', 'みやこ', 'みちこ', 'みのこ', 'みやびこ',
    'みどり', 'みどりいろ', 'みどりがおか', 'みどりがおかにし', 'みどりがおかひがし',
    'みどりがり', 'みどりだい', 'みどりだいきた', 'みどりだいにし', 'みどりだいひがし',
    'みどりだいみなみ', 'みどりだに', 'みどりどおりきた', 'みどりどおりみなみ',
    'みどりやま', 'みどりいろ', 'みどりがおか', 'みどりがおかにし', 'みどりがおかひがし',
    'みどりがり', 'みどりだい', 'みどりだいきた', 'みどりだいにし', 'みどりだいひがし',
    'みどりだいみなみ', 'みどりだに', 'みどりどおりきた', 'みどりどおりみなみ',
    'みどりやま'
  ];
  
  return basicWords;
}

// カタカナをひらがなに変換する関数
function katakanaToHiragana(str) {
  return str.replace(/[\u30A1-\u30F6]/g, function(match) {
    const chr = match.charCodeAt(0) - 0x60;
    return String.fromCharCode(chr);
  });
}

// 漢字をひらがなに変換する関数（簡易版）
function kanjiToHiragana(str) {
  const kanjiHiraganaMap = {
    '日本国憲法': 'にほんこくけんぽう', '日本': 'にほん', '憲法': 'けんぽう',
    '微塵子': 'みじんこ', '民間企業': 'みんかんきぎょう', '巫女': 'みこ',
    '都': 'みやこ', '道子': 'みちこ', '身の子': 'みのこ', '雅子': 'みやびこ',
    '緑': 'みどり', '緑色': 'みどりいろ', '緑が丘': 'みどりがおか',
    '緑が丘西': 'みどりがおかにし', '緑が丘東': 'みどりがおかひがし',
    '緑狩り': 'みどりがり', '緑台': 'みどりだい', '緑台北': 'みどりだいきた',
    '緑台西': 'みどりだいにし', '緑台東': 'みどりだいひがし',
    '緑台南': 'みどりだいみなみ', '緑谷': 'みどりだに',
    '緑通り北': 'みどりどおりきた', '緑通り南': 'みどりどおりみなみ',
    '緑山': 'みどりやま'
  };
  
  let result = str;
  Object.keys(kanjiHiraganaMap).forEach(kanji => {
    result = result.replace(new RegExp(kanji, 'g'), kanjiHiraganaMap[kanji]);
  });
  return result;
}

// 単語をひらがなに変換する関数
function convertToHiragana(word) {
  let hiragana = katakanaToHiragana(word);
  hiragana = kanjiToHiragana(hiragana);
  return hiragana;
}

// 既存の辞書ファイルを読み込む関数
function loadExistingDictionary(char) {
  const filePath = path.join(__dirname, `../assets/dictionary_new/char_${char}.json`);
  try {
    if (fs.existsSync(filePath)) {
      const content = fs.readFileSync(filePath, 'utf8');
      return JSON.parse(content);
    }
  } catch (error) {
    console.log(`Error reading char_${char}.json:`, error.message);
  }
  return [];
}

// メイン処理
function main() {
  console.log('包括的な基本単語辞書を作成中...');
  
  // 基本単語をひらがなに変換
  const hiraganaWords = createComprehensiveDictionary().map(word => convertToHiragana(word));
  
  // 重複を除去
  const uniqueWords = [...new Set(hiraganaWords)];
  console.log(`基本単語数: ${uniqueWords.length}個`);
  
  // 3文字以上の単語のみをフィルタリング
  const filteredWords = uniqueWords.filter(word => word && word.length >= 3);
  console.log(`3文字以上の基本単語数: ${filteredWords.length}個`);
  
  // 単語を分類
  const categories = {};
  filteredWords.forEach(word => {
    const firstChar = word[0];
    if (!categories[firstChar]) {
      categories[firstChar] = [];
    }
    categories[firstChar].push(word);
  });
  
  // 各文字の辞書ファイルを更新
  Object.keys(categories).forEach(category => {
    const newWords = categories[category];
    const existingWords = loadExistingDictionary(category);
    
    // 既存の単語と新しい単語を結合
    const allWords = [...existingWords, ...newWords];
    const uniqueWords = [...new Set(allWords)];
    
    const outputPath = path.join(__dirname, `../assets/dictionary_new/char_${category}.json`);
    fs.writeFileSync(outputPath, JSON.stringify(uniqueWords, null, 2), 'utf8');
    console.log(`「${category}」の辞書: ${uniqueWords.length}個の単語を保存しました。`);
  });
  
  console.log('\n=== 包括的な基本単語辞書作成完了 ===');
  console.log(`追加された基本単語数: ${filteredWords.length}個`);
  console.log('包括的な基本単語辞書の作成が完了しました！');
}

main();