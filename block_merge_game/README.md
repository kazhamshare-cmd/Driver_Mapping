# Block Merge Game

FlutterとFlame + Forge2Dで作成された、物理演算を活用したボールパズルゲームです。

## ゲームの特徴

### 基本ルール
- **10列 x 20行**のテトリス風のグリッド（画面幅いっぱいに表示）
- **円形のボール**で物理演算による跳ね返りが楽しめる
- **レベル別の色数制限**
  - Level 1: 4色（赤、青、緑、黄）
  - Level 2: 5色（紫追加）
  - Level 3以降: 6色（オレンジ追加）
- **特殊ボール（虹色）**: すべての色と結合可能な万能ボール
- ボールは**Forge2D物理エンジン**により自然に落下・跳ね返る

### ゲームシステム

#### 初期配置
- ゲーム開始時に**20個のブロック**がランダムに配置される
- 追加のブロック生成はなし（配置されたブロックのみでプレイ）

#### 移動操作
- **各列の一番上のブロックは常に移動可能**（白い点が表示）
- **ドラッグ&ドロップ**で移動可能なブロックを好きな場所に配置
- 空中には配置不可（はみ出した部分は物理演算で落下）

#### ブロック消去
- **縦または横に4つ以上**同じ色が揃うと自動消去
- 消去前に**1秒間点滅アニメーション**
- スコアリング：
  - ブロック数 × 10 × コンボ倍率
  - 例: 4個消去 = 40点、コンボ2倍時 = 80点

#### コンボシステム
- **3秒以内に連続消去**するとコンボ継続
- コンボ倍率に応じてスコアが倍増
- 画面右にコンボ数表示

#### 特殊ブロック
- **5個以上同時消去**で虹色ブロック出現
- 虹色ブロックはすべての色と結合可能
- グラデーション表示で視認性が高い

#### ゲームオーバー
- 移動可能なブロックがなくなり、グリッドが50%以上埋まると終了
- タップでリスタート可能

## 実行方法

```bash
cd block_merge_game
flutter run
```

## 技術スタック

- **Flutter**: UIフレームワーク
- **Flame**: ゲームエンジン
- **Forge2D**: 2D物理エンジン（ブロックの落下と衝突判定）

## プロジェクト構成

```
lib/
├── main.dart                          # アプリのエントリーポイント
└── game/
    ├── block_merge_game.dart          # メインゲームロジック
    ├── components/
    │   ├── game_block.dart            # ブロックコンポーネント
    │   └── game_grid.dart             # グリッドシステム
    └── utils/
        └── block_color.dart           # ブロックカラー定義
```

## 実装された高度な機能

### 🎨 ビジュアルエフェクト
- **3Dボールの表現**: ラジアルグラデーションで立体感を表現
- **光沢エフェクト**: ハイライトでボールの質感を強調
- **虹色ボール**: 美しいマルチカラーグラデーション
- **消去時の点滅アニメーション**（1秒間）
- **移動可能ボールの視覚的フィードバック**（白い点）
- **画面幅いっぱいのグリッド表示**
- **ダークブルー背景**で見やすいUI

### 🎮 ゲームメカニクス
- **Forge2D物理エンジン**によるリアルな落下と跳ね返り
- **円形コリジョン**による自然なボール同士の衝突
- **縦・横4つ消去システム**
- **コンボシステム**（3秒以内の連続消去）
- **特殊ボール（虹色）の自動生成**（5個以上消去時）
- **レスポンシブデザイン**（どんな画面サイズでも最適表示）

### 📊 レベルシステム
- レベルに応じた色数の段階的増加
- Level 1: 4色（初心者向け）
- Level 2: 5色（中級者向け）
- Level 3以降: 6色（上級者向け）

## 今後の改善案

- サウンドエフェクト（消去音、コンボ音）
- パーティクルエフェクト（消去時の爆発）
- ハイスコア保存機能（SharedPreferences使用）
- オンラインランキング（Firebase使用）
- チュートリアルモード
- アチーブメント機能

## ライセンス

MIT License
